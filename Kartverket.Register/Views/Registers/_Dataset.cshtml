@model PagedList.IPagedList<Kartverket.Register.Models.RegisterItem>
﻿@using Kartverket.Register.Helpers
@using PagedList;
@using PagedList.Mvc;
@using Kartverket.Register.Models

<table class="table table-striped table-bordered" style="background-color: white">
    <thead>
        <tr>
            <th>Tittel</th>
            <th>Eier / leverandør</th>
            <th>Temagruppe</th>
            <th>Beskrivelse</th>
            <th style="width: 80px">Metadata</th>
            <th style="width: 90px">Produktark</th>
            <th style="width: 90px">Kartografi</th>
            <th style="width: 110px">Produkt-spesifikasjon</th>
            <th>SOSI</th>
            <th>WMS</th>
            <th>Status</th>
        </tr>
    </thead>

    <tbody class="list">
        @foreach (Dataset item in Model)
        {
            <tr>
                <td>
                    <p class="role-button" role="button">
                        <b><a href="/register/@Html.ToUrl(item.register.name)/@Html.ToUrl(item.datasetowner.name)/@Html.ToUrl(item.name)/">@item.name</a></b>
                    </p>
                </td>
                <td class="publisher">@item.datasetowner.name</td>
                
                @if (item.ThemeGroupId != null)
                {
                    <td class="themegroup">@item.theme.description</td>
                }
                else
                {
                    <td class="themegroup">Ikke angitt</td>
                }
                
                <td>
                    @if (item.description != null)
                    {
                        <p id="shortdesc">
                            @if (item.description.Length < 80)
                            {
                                @item.description.Substring(0, item.description.Length)
                            }
                            else
                            {
                                @item.description.Substring(0, 80)<text>...</text>
                                <a href="/register/@Html.ToUrl(item.register.name)/@Html.ToUrl(item.datasetowner.name)/@Html.ToUrl(item.name)/">vis mer info</a>
                            }
                        </p>
                    }
                </td>
                <td>
                    @if (!string.IsNullOrWhiteSpace(item.MetadataUrl))
                    {
                        <a href="@item.MetadataUrl" class="btn btn-sm btn-fresh-green" title="Vis metadata for @item.name"><span class="glyphicon glyphicon-globe"></span> Vis</a>
                    }
                </td>
                <td>
                    @if (!string.IsNullOrWhiteSpace(item.ProductSheetUrl))
                    {
                        <a href="@item.ProductSheetUrl" class="btn btn-sm btn-fresh-blue" title="Last ned produktark for @item.name"><span class="glyphicon glyphicon-info-sign"></span> Hent</a>
                    }
                </td>
                <td>
                    @if (!string.IsNullOrWhiteSpace(item.PresentationRulesUrl))
                    {
                        <a href="@item.PresentationRulesUrl" class="btn btn-sm btn-fresh-green" title="Last ned kartografi for @item.name"><span class="glyphicon glyphicon-picture"></span> Hent</a>
                    }
                </td>
                <td>
                    @if (!string.IsNullOrWhiteSpace(item.ProductSpecificationUrl))
                    {
                        <a href="@item.ProductSpecificationUrl" class="btn btn-sm btn-fresh-blue" title="Last ned produktspesifikasjon for @item.name"><span class="glyphicon glyphicon-list-alt"></span> Hent</a>
                    }
                </td>
                <td>
                    @if (!string.IsNullOrWhiteSpace(item.DistributionFormat) && item.DistributionFormat.Trim().ToLower().Equals("sosi"))
                    {
                        <text>ja</text>
                    }
                    else
                    {
                        <text>nei</text>
                    }
                </td>
                <td>
                    @if (!string.IsNullOrWhiteSpace(item.WmsUrl))
                    {
                        <a href="@item.WmsUrl">WMS</a>
                    }
                </td>
                <td class="status">
                    @if (item.status != null)
                    {
                        @item.status.description
                    }
                </td>

            </tr>
        }
    </tbody>
</table>

<div class="text-center">
    Registere viser @Model.FirstItemOnPage - @Model.LastItemOnPage av @Model.TotalItemCount

    @Html.PagedListPager(Model, page => Url.Action("Details", new { page, sorting = ViewBag.SortOrder }))
</div>




