///////////////////////////////////////////////////////////
//  Document.cs
//  Implementation of the Class Document
//  Generated by Enterprise Architect
//  Created on:      24-nov-2014 22:43:38
//  Original author: Tor Kjetil
///////////////////////////////////////////////////////////

using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.ComponentModel.DataAnnotations.Schema;
using System.ComponentModel.DataAnnotations;


namespace Kartverket.Register.Models
{
    public class Document : RegisterItem
    {
        // logos will be stored in this directory
        public const string DataDirectory = "documents/";

        [Display(Name = "Miniatyrbilde:")]
        public string thumbnail { get; set; }
        [Display(Name = "Dokumenteier:")]
        [ForeignKey("documentowner")]
        public Guid documentownerId { get; set; }
        public virtual Organization documentowner { get; set; }

        public virtual string GetDocumentUrl()
        {
            if (register.parentRegisterId == Guid.Empty)
            {
                return "/register/versjoner/" + register.seoname + "/" + documentowner.seoname + "/" + seoname;
            }
            else {
                return "/subregister/versjoner/" + register.parentRegister.seoname + "/" + register.owner.seoname + "/" + register.seoname + "/" + documentowner.seoname + "/" + seoname;
            }
        }

        public virtual string GetDocumentEditUrl()
        {
            if (register.parentRegister == null)
            {
                return "/dokument/" + register.seoname + "/" + documentowner.seoname + "/" + seoname + "/rediger";
            }
            else {
                return "/dokument/" + register.parentRegister.seoname + "/" + register.owner.seoname + "/" + register.seoname + "/" + documentowner.seoname + "/" + seoname + "/rediger";
            }
        }

        public virtual string GetDocumentDeleteUrl()
        {
            if (register.parentRegister == null)
            {
                return "/dokument/" + register.seoname + "/" + documentowner.seoname + "/" + seoname + "/slett";
            }
            else {
                return "/dokument/" + register.parentRegister.seoname + "/" + register.owner.seoname + "/" + register.seoname + "/" + documentowner.seoname + "/" + seoname + "/slett";
            }
        }


    }//end Document
}//end namespace Datamodell